Todo: add codes for ws emits and types to both client and server
